package com.ecommerce.spring.services;

import java.util.Optional;

import org.modelmapper.ModelMapper;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.ecommerce.spring.entities.Products;
import com.ecommerce.spring.entities.User;
import com.ecommerce.spring.repositories.ProductRepository;
import com.ecommerce.spring.reqresmodels.ProductEditRequestModel;
import com.ecommerce.spring.reqresmodels.ProductEditResponseModel;
import com.ecommerce.spring.reqresmodels.UserDetailRequestModel;
import com.ecommerce.spring.reqresmodels.UserDetailResponseModel;

@Service
public class ProductService {

	@Autowired
	ProductRepository prodRepo;

	public ProductEditResponseModel editProd(ProductEditRequestModel requestModel) {
		ModelMapper mapper = new ModelMapper();
		Optional<Products> product = prodRepo.findById(requestModel.getProductId());
		boolean valid = validateInput(requestModel);
		boolean duplicateEmail = checkUniqueEmail(requestModel);
		if(valid && duplicateEmail) {
			if(product != null) {		
				product.get().setProductName(requestModel.getProductName());
				product.get().setProductDescription(requestModel.getProductDescription());
				product.get().setProductPrice(requestModel.getProductPrice());
				product.get().setBrand(requestModel.getBrand());
				product.get().setCategories(requestModel.getCategories());
				
				prodRepo.save(product.get());
				return new ProductEditResponseModel();
			}else {
				return null;
			}
		}else {
			return null;
		}

	}
}
